{% extends 'base.html' %}
{% load static %}

{% block title %}Mapa Interactivo - {{ block.super }}{% endblock %}

{% block meta_description %}Explora Garzón con nuestro mapa interactivo. Descubre lugares turísticos, hoteles, restaurantes y puntos de interés en un solo lugar.{% endblock %}

{% block breadcrumb %}
<section class="breadcrumb-section">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'core:home' %}">Inicio</a></li>
                <li class="breadcrumb-item active" aria-current="page">Mapa Interactivo</li>
            </ol>
        </nav>
    </div>
</section>
{% endblock %}

{% block content %}
<!-- Header del Mapa -->
<section class="section section-light">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <div class="section-subtitle">Navegación</div>
            <h1 class="section-title">Mapa Interactivo de Garzón</h1>
            <p class="section-text">Explora todos los lugares turísticos, establecimientos y puntos de interés de Garzón en nuestro mapa interactivo. Planifica tu visita y descubre nuevos destinos.</p>
        </div>
    </div>
</section>

<!-- Mapa y Controles -->
<section class="section">
    <div class="container-fluid px-0">
        <div class="map-container">
            <!-- Sidebar de Controles -->
            <div class="map-sidebar">
                <div class="map-controls">
                    <h5 class="controls-title">
                        <i class="ph-funnel"></i> Filtros
                    </h5>
                    
                    <!-- Filtros por Categoría -->
                    <div class="control-group">
                        <h6 class="control-label">Lugares Turísticos</h6>
                        <div class="control-options">
                            <label class="control-checkbox">
                                <input type="checkbox" class="map-filter" data-type="lugar" checked>
                                <span class="checkmark"></span>
                                <span class="control-text">
                                    <i class="ph-mountains text-primary"></i> Todos los lugares
                                </span>
                            </label>
                            {% for categoria in categorias %}
                            <label class="control-checkbox">
                                <input type="checkbox" class="map-filter categoria-filter" data-categoria="{{ categoria.slug }}" checked>
                                <span class="checkmark"></span>
                                <span class="control-text">{{ categoria.nombre }}</span>
                            </label>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Filtros por Establecimiento -->
                    <div class="control-group">
                        <h6 class="control-label">Establecimientos</h6>
                        <div class="control-options">
                            <label class="control-checkbox">
                                <input type="checkbox" class="map-filter" data-type="establecimiento" checked>
                                <span class="checkmark"></span>
                                <span class="control-text">
                                    <i class="ph-buildings text-success"></i> Todos los establecimientos
                                </span>
                            </label>
                            {% for tipo_key, tipo_value in tipos_establecimiento.items %}
                            <label class="control-checkbox">
                                <input type="checkbox" class="map-filter tipo-filter" data-tipo="{{ tipo_key }}" checked>
                                <span class="checkmark"></span>
                                <span class="control-text">{{ tipo_value }}</span>
                            </label>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Controles de Vista -->
                    <div class="control-group">
                        <h6 class="control-label">Vista del Mapa</h6>
                        <div class="map-view-controls">
                            <button class="view-btn active" data-view="roadmap">
                                <i class="ph-map"></i> Mapa
                            </button>
                            <button class="view-btn" data-view="satellite">
                                <i class="ph-globe"></i> Satélite
                            </button>
                            <button class="view-btn" data-view="hybrid">
                                <i class="ph-stack"></i> Híbrido
                            </button>
                            <button class="view-btn" data-view="terrain">
                                <i class="ph-mountains"></i> Terreno
                            </button>
                        </div>
                    </div>
                    
                    <!-- Información -->
                    <div class="control-group">
                        <div class="map-legend">
                            <h6 class="control-label">Leyenda</h6>
                            <div class="legend-items">
                                <div class="legend-item">
                                    <div class="legend-marker lugar-marker"></div>
                                    <span>Lugares Turísticos</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-marker establecimiento-marker"></div>
                                    <span>Establecimientos</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-marker centro-marker"></div>
                                    <span>Centro de Garzón</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Toggle Button -->
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="ph-caret-left"></i>
                </button>
            </div>
            
            <!-- Mapa -->
            <div class="map-wrapper">
                <div id="google-map" class="google-map" 
                     data-lat="2.1976" 
                     data-lng="-75.6276"
                     data-zoom="14">
                </div>
                
                <!-- Controles Flotantes -->
                <div class="map-floating-controls">
                    <button class="floating-btn" id="centerMap" title="Centrar en Garzón">
                        <i class="ph-crosshair"></i>
                    </button>
                    <button class="floating-btn" id="fullscreenMap" title="Pantalla Completa">
                        <i class="ph-arrows-out"></i>
                    </button>
                    <button class="floating-btn" id="shareLocation" title="Compartir Ubicación">
                        <i class="ph-share"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Información de Ubicación -->
<section class="section section-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="location-info" data-aos="fade-right">
                    <h3>Cómo llegar a Garzón</h3>
                    <p class="mb-4">Garzón se encuentra estratégicamente ubicado en el departamento del Huila, siendo un punto de conexión importante entre diferentes regiones del país.</p>
                    
                    <div class="transport-options">
                        <div class="transport-item">
                            <div class="transport-icon">
                                <i class="ph-airplane"></i>
                            </div>
                            <div class="transport-content">
                                <h5>Por Avión</h5>
                                <p>El aeropuerto más cercano es el Benito Salas de Neiva, a aproximadamente 40 kilómetros de Garzón.</p>
                            </div>
                        </div>
                        
                        <div class="transport-item">
                            <div class="transport-icon">
                                <i class="ph-bus"></i>
                            </div>
                            <div class="transport-content">
                                <h5>Por Carretera</h5>
                                <p>Conexiones directas desde Bogotá (4 horas), Cali (3 horas) y otras ciudades principales del país.</p>
                            </div>
                        </div>
                        
                        <div class="transport-item">
                            <div class="transport-icon">
                                <i class="ph-car"></i>
                            </div>
                            <div class="transport-content">
                                <h5>En Vehículo Particular</h5>
                                <p>Acceso por la vía nacional que conecta con la Ruta del Café y otros destinos turísticos del Huila.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="location-stats" data-aos="fade-left">
                    <div class="stat-card">
                        <div class="stat-header">
                            <h5>Datos de Ubicación</h5>
                        </div>
                        <div class="stat-items">
                            <div class="stat-item">
                                <i class="ph-map-pin"></i>
                                <div class="stat-content">
                                    <span class="stat-label">Coordenadas</span>
                                    <span class="stat-value">2°11'51"N, 75°37'39"O</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <i class="ph-mountain"></i>
                                <div class="stat-content">
                                    <span class="stat-label">Altitud</span>
                                    <span class="stat-value">828 msnm</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <i class="ph-thermometer"></i>
                                <div class="stat-content">
                                    <span class="stat-label">Temperatura</span>
                                    <span class="stat-value">24°C promedio</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <i class="ph-users"></i>
                                <div class="stat-content">
                                    <span class="stat-label">Población</span>
                                    <span class="stat-value">~80,000 hab.</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
